{"version":3,"file":"flash-message.js","sources":["../../src/components/flash-message.hbs","../../src/components/flash-message.js"],"sourcesContent":["import { precompileTemplate } from \"@ember/template-compilation\";\nexport default precompileTemplate(\"<div\\n  class=\\\"flash-message {{this.alertType}} {{if this.exiting this.exitingClass}} {{if this.active \\\"active\\\"}}\\\"\\n  role=\\\"alert\\\"\\n  ...attributes\\n  {{on \\\"click\\\" this.onClick}}\\n  {{this.bindEvents}}\\n  {{! template-lint-disable no-invalid-interactive }}\\n>\\n  {{#if (has-block)}}\\n    {{yield this @flash this.onClose}}\\n  {{else}}\\n    {{@flash.message}}\\n    {{#if this.showProgressBar}}\\n      <div class=\\\"alert-progress\\\">\\n        <div class=\\\"alert-progressBar\\\" style={{this.progressDuration}}></div>\\n      </div>\\n    {{/if}}\\n  {{/if}}\\n</div>\")","import Component from '@glimmer/component';\nimport { tracked } from '@glimmer/tracking';\nimport { classify } from '@ember/string';\nimport { htmlSafe } from '@ember/template';\nimport { isPresent } from '@ember/utils';\nimport { next, cancel } from '@ember/runloop';\nimport { action } from '@ember/object';\nimport { modifier } from 'ember-modifier';\n\n/**\n * ARGS\n *\n * flash: FlashObject\n * messageStyle?: 'bootstrap' | 'foundation'\n * messageStylePrefix?: string\n */\n\nexport default class FlashMessage extends Component {\n  @tracked active = false;\n\n  @tracked pendingSet;\n  @tracked _mouseEnterHandler;\n  @tracked _mouseLeaveHandler;\n\n  get messageStyle() {\n    return this.args.messageStyle ?? 'bootstrap';\n  }\n\n  get showProgress() {\n    return this.args.flash.showProgress;\n  }\n\n  get notExiting() {\n    return !this.exiting;\n  }\n\n  get showProgressBar() {\n    return this.showProgress && this.notExiting;\n  }\n\n  get exiting() {\n    return this.args.flash.exiting;\n  }\n\n  get exitingClass() {\n    return this.args.exitingClass || 'exiting';\n  }\n\n  get messageStylePrefix() {\n    return this.args.messageStylePrefix ?? this._defaultMessageStylePrefix;\n  }\n\n  get _defaultMessageStylePrefix() {\n    const isFoundation = this.messageStyle === 'foundation';\n    return isFoundation ? 'alert-box ' : 'alert alert-';\n  }\n\n  get alertType() {\n    const flashType = this.args.flash.type || '';\n    const prefix = this.messageStylePrefix;\n    return `${prefix}${flashType}`;\n  }\n\n  get flashType() {\n    return classify(this.args.flash.type || '');\n  }\n\n  get progressDuration() {\n    if (!this.args.flash?.showProgress) {\n      return false;\n    }\n    const duration = this.args.flash?.timeout || 0;\n    return htmlSafe(`transition-duration: ${duration}ms`);\n  }\n\n  @action\n  _mouseEnter() {\n    if (isPresent(this.args.flash)) {\n      this.args.flash.preventExit();\n    }\n  }\n\n  @action\n  _mouseLeave() {\n    if (isPresent(this.args.flash) && !this.args.flash.exiting) {\n      this.args.flash.allowExit();\n    }\n  }\n\n  _destroyFlashMessage() {\n    if (this.args.flash) {\n      this.args.flash.destroyMessage();\n    }\n  }\n\n  @action\n  onClick() {\n    const destroyOnClick = this.args.flash?.destroyOnClick ?? true;\n\n    if (destroyOnClick) {\n      this._destroyFlashMessage();\n    }\n  }\n\n  @action\n  onClose() {\n    this._destroyFlashMessage();\n  }\n\n  bindEvents = modifier((element) => {\n    const pendingSet = next(this, () => {\n      this.active = true;\n    });\n    this.pendingSet = pendingSet;\n    this._mouseEnterHandler = this._mouseEnter;\n    this._mouseLeaveHandler = this._mouseLeave;\n    element.addEventListener('mouseenter', this._mouseEnterHandler);\n    element.addEventListener('mouseleave', this._mouseLeaveHandler);\n\n    return () => {\n      element.removeEventListener('mouseenter', this._mouseEnterHandler);\n      element.removeEventListener('mouseleave', this._mouseLeaveHandler);\n      cancel(this.pendingSet);\n      this._destroyFlashMessage();\n    };\n  });\n}\n"],"names":["FlashMessage","_class","Component","constructor","args","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_defineProperty","modifier","element","pendingSet","next","active","_mouseEnterHandler","_mouseEnter","_mouseLeaveHandler","_mouseLeave","addEventListener","removeEventListener","cancel","_destroyFlashMessage","messageStyle","showProgress","flash","notExiting","exiting","showProgressBar","exitingClass","messageStylePrefix","_defaultMessageStylePrefix","isFoundation","alertType","flashType","type","prefix","classify","progressDuration","duration","timeout","htmlSafe","isPresent","preventExit","allowExit","destroyMessage","onClick","destroyOnClick","onClose","_applyDecoratedDescriptor","prototype","tracked","configurable","enumerable","writable","initializer","action","Object","getOwnPropertyDescriptor","setComponentTemplate","TEMPLATE"],"mappings":"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"}